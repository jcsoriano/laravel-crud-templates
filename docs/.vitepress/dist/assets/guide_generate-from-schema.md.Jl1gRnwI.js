import{_ as i,c as a,o as e,ah as t}from"./chunks/framework.B9Iqqwi6.js";const c=JSON.parse('{"title":"Generate from Schema","description":"","frontmatter":{},"headers":[],"relativePath":"guide/generate-from-schema.md","filePath":"guide/generate-from-schema.md"}'),l={name:"guide/generate-from-schema.md"};function n(h,s,p,d,k,r){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="generate-from-schema" tabindex="-1">Generate from Schema <a class="header-anchor" href="#generate-from-schema" aria-label="Permalink to “Generate from Schema”">​</a></h1><p>CRUD Templates for Laravel allows you to generate CRUD files from existing database tables. This is especially useful when you&#39;re adding the package to an existing project or want to generate CRUDs for tables that already exist.</p><h2 id="basic-usage" tabindex="-1">Basic Usage <a class="header-anchor" href="#basic-usage" aria-label="Permalink to “Basic Usage”">​</a></h2><p>Use the <code>--table</code> option to specify an existing database table:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crud:generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Post</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --table=posts</span></span></code></pre></div><p>This will:</p><ol><li>Connect to your database</li><li>Read the table schema</li><li>Detect column types and generate appropriate field types</li><li>Create all CRUD files based on the existing structure</li></ol><h2 id="column-type-mapping" tabindex="-1">Column Type Mapping <a class="header-anchor" href="#column-type-mapping" aria-label="Permalink to “Column Type Mapping”">​</a></h2><p>The package automatically maps database column types to field types:</p><table tabindex="0"><thead><tr><th>Database Column</th><th>Field Type</th><th>Model Cast</th></tr></thead><tbody><tr><td><code>varchar</code>, <code>char</code></td><td><code>string</code></td><td>-</td></tr><tr><td><code>text</code>, <code>longtext</code></td><td><code>text</code></td><td>-</td></tr><tr><td><code>int</code>, <code>integer</code></td><td><code>integer</code></td><td>-</td></tr><tr><td><code>decimal</code>, <code>float</code></td><td><code>decimal</code></td><td><code>decimal:2</code></td></tr><tr><td><code>boolean</code>, <code>tinyint(1)</code></td><td><code>boolean</code></td><td><code>boolean</code></td></tr><tr><td><code>date</code></td><td><code>date</code></td><td><code>immutable_date</code></td></tr><tr><td><code>datetime</code>, <code>timestamp</code></td><td><code>datetime</code></td><td><code>immutable_datetime</code></td></tr><tr><td><code>json</code></td><td><code>json</code></td><td><code>array</code></td></tr></tbody></table><h2 id="nullable-columns" tabindex="-1">Nullable Columns <a class="header-anchor" href="#nullable-columns" aria-label="Permalink to “Nullable Columns”">​</a></h2><p>Nullable columns in the database are automatically detected and handled:</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> posts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    excerpt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- This will be detected as nullable</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    published_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  -- This will also be nullable</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Running generate from schema:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crud:generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Post</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --table=posts</span></span></code></pre></div><p>The generated model will properly handle nullable fields in validation and allow null values.</p><h2 id="foreign-keys" tabindex="-1">Foreign Keys <a class="header-anchor" href="#foreign-keys" aria-label="Permalink to “Foreign Keys”">​</a></h2><p>Foreign key columns (typically ending with <code>_id</code>) are detected and converted to <code>belongsTo</code> relationships:</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> posts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    category_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UNSIGNED,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    author_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UNSIGNED,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (category_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> categories(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (author_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>The package will generate:</p><ul><li><code>category:belongsTo</code> relationship</li><li><code>author:belongsTo</code> relationship</li></ul><h2 id="polymorphic-relationships" tabindex="-1">Polymorphic Relationships <a class="header-anchor" href="#polymorphic-relationships" aria-label="Permalink to “Polymorphic Relationships”">​</a></h2><p>Polymorphic columns (<code>*_type</code> and <code>*_id</code> pairs) are automatically detected. For example, if your table has <code>commentable_type</code> and <code>commentable_id</code> columns, a <code>morphTo</code> relation will be created with the name <code>commentable</code>.</p><p><strong>Nullable Polymorphic Relationships:</strong> If both the <code>*_type</code> and <code>*_id</code> columns are nullable, the generated migration will use <code>nullableMorphs()</code> instead of <code>morphs()</code>.</p><p>Example table:</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> comments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    commentable_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    commentable_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Running generate from schema will automatically generate:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crud:generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Comment</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --table=comments</span></span></code></pre></div><p>The generated model will include:</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> commentable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MorphTo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">morphTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="other-relationships" tabindex="-1">Other Relationships <a class="header-anchor" href="#other-relationships" aria-label="Permalink to “Other Relationships”">​</a></h2><p>You can combine generate from schema with <code>--fields</code> option to specify other relationship types:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crud:generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Post</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --table=posts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --fields=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;featured:boolean,tags:belongsToMany,comments:morphMany&quot;</span></span></code></pre></div><h2 id="overriding-table-fields" tabindex="-1">Overriding Table Fields <a class="header-anchor" href="#overriding-table-fields" aria-label="Permalink to “Overriding Table Fields”">​</a></h2><p>If you specify a field that already exists in the table, your custom definition will override the default field type:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crud:generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Post</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --table=posts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --fields=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status:enum:PostStatus&quot;</span></span></code></pre></div><p>If the <code>posts</code> table has a <code>status</code> column, it will be replaced with your enum definition instead of defaulting to a <code>string</code> field.</p><h3 id="migration-behavior-with-table" tabindex="-1">Migration Behavior with --table <a class="header-anchor" href="#migration-behavior-with-table" aria-label="Permalink to “Migration Behavior with --table”">​</a></h3><p>When using the <code>--table</code> option, the migration file is automatically skipped since the table already exists:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">php</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artisan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> crud:generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> User</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --table=users</span></span></code></pre></div><p>You&#39;ll see a warning message:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>⚠ --table used so the table already exists. Skipping migration generation</span></span></code></pre></div><p>This prevents creating duplicate migrations for existing tables. All other CRUD files (models, controllers, etc.) will still be generated normally.</p><h2 id="database-connection" tabindex="-1">Database Connection <a class="header-anchor" href="#database-connection" aria-label="Permalink to “Database Connection”">​</a></h2><p>Generate from schema uses your default database connection defined in <code>config/database.php</code>. Make sure:</p><ol><li>Your database connection is properly configured</li><li>The database is accessible</li><li>The table exists before running the command</li></ol><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to “Next Steps”">​</a></h2><ul><li>Explore the <a href="/templates/api.html">API Template</a> to understand generated structure</li><li>Learn about <a href="/templates/customizing-stubs.html">Customizing Stubs</a> to modify generated code</li><li>Check <a href="/troubleshooting.html">Troubleshooting</a> for common issues</li></ul>`,48)])])}const g=i(l,[["render",n]]);export{c as __pageData,g as default};
